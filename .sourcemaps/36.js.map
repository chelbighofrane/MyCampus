{"version":3,"sources":["../../src/pages/cafeteria/feedbacks-cafeteria/feedbacks-cafeteria.module.ts","../../src/pages/cafeteria/feedbacks-cafeteria/feedbacks-cafeteria.ts"],"names":[],"mappings":"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","file":"36.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { FeedbacksCafeteriaPage } from './feedbacks-cafeteria';\n\n@NgModule({\n  declarations: [\n    FeedbacksCafeteriaPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(FeedbacksCafeteriaPage),\n  ],\n})\nexport class FeedbacksCafeteriaPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/cafeteria/feedbacks-cafeteria/feedbacks-cafeteria.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, ModalController } from 'ionic-angular';\nimport { Observable } from '@firebase/util';\nimport { Product } from '../../../models/product.model';\nimport {  ProductListService} from '../../../servicesCafeteria/product-list/product-list.service';\n\n\n/**\n * Generated class for the FeedbacksCafeteriaPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n  selector: 'page-feedbacks-cafeteria',\n  templateUrl: 'feedbacks-cafeteria.html',\n})\nexport class FeedbacksCafeteriaPage {\n  fab:boolean;\n  sale:boolean;\n  length: number;\n  productList$ : Observable <Product[]>;\n  products: Product[] = [];\n \n\n  constructor(public navCtrl: NavController, public navParams: NavParams\n  , private product:ProductListService,private modal: ModalController) {\n    \n  }\n\n  ngOnInit() {\n    this.length = 0;\n    this.fab = false;\n    this.sale = false;\n    this.product\n        .getProductList()//db list\n        .snapshotChanges()//key and value\n        //foreach changes return an object \n        .map(changes => {\n            return changes.map(c => ({\n                key: c.payload.key, ...c.payload.val()\n            }))\n        }).subscribe(\n        res => {\n            this.products = res;\n            console.log(this.length);\n            for (let i = 0; i < this.products.length; i++) {\n                if ( this.products[i].feedbacks ==null) {\n                    this.products.splice(i, 1);\n                    i--;\n                } \n            }\n            let sum : number;\n      let i : number;\n      for(let element of this.products)\n      {\n        sum=0;\n        i=0;\n        \n        if(element.feedbacks != null)\n        {\n          for(let feed of element.feedbacks)\n          {\n            if(feed.userID!='cafeteria')\n            {\n              sum+= feed.rate;\n              i++;\n            }\n          }\n\n          if(i!=0)\n          {\n            element.moyennefeed= sum/i ;\n          }\n          else\n          {\n            element.moyennefeed=0;\n          }\n          \n        \n        }\n        else\n        {\n          element.moyennefeed=0;\n        }\n      }\n            this.length = this.products.length;\n            console.log(this.products);\n           \n        },\n        error => {\n            console.log('error');\n        });\n  \n   \n}\n\n  ionViewDidLoad() {\n    console.log('ionViewDidLoad FeedbacksCafeteriaPage');\n  }\n\n  openMenu(p ,iduser: string)\n{\n\n  const myData= {\n    commentProduct: p,\n    commentuser: iduser\n  };\n\n  const mymodal = this.modal.create('ModalFeedbackPage', {data: myData},\n  {\n    cssClass: \"my-modal\",\n    \n   \n  });\n\n  mymodal.present();\n\n  mymodal.onDidDismiss((data)=> {\n    console.log(data);\n  })\n}\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/cafeteria/feedbacks-cafeteria/feedbacks-cafeteria.ts"],"sourceRoot":""}